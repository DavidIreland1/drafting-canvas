!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.reducer=e():t.reducer=e()}(global,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>we});const n={overwrite:function(t,e){Object.entries(e.payload.state).forEach((function(e){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e,2),r=n[0],o=n[1];void 0!==o&&(t[r]=o)}))}};function r(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function o(t,e,n){return{x:(t.x-e.x)*Math.cos(n)-(t.y-e.y)*Math.sin(n)+e.x,y:(t.x-e.x)*Math.sin(n)+(t.y-e.y)*Math.cos(n)+e.y}}function i(t,e){var n=e.x-t.x,r=e.y-t.y,o=Math.sqrt(n*n+r*r);return{x:n/o,y:r/o,angle:Math.atan2(r,n),length:o}}var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u={toString:function(t,e){var n;void 0===e&&(e="hsla");var r=u.hsbaToHsla(t);switch(e){case"hsl":return u.toHslString(r);case"hsla":return u.toHslaString(r);case"hsb":return u.toHsbString(r);case"hsba":return u.toHsbaString(r);case"rgb":return u.toRgbString(u.hslaToRgba(r));case"rgba":return u.toRgbaString(u.hslaToRgba(r));case"hex3":return u.rgbaToHex4(u.hslaToRgba(r).slice(0,3));case"hex4":return u.rgbaToHex4(u.hslaToRgba(r));case"hex6":return u.rgbaToHex8(u.hslaToRgba(r).slice(0,3));case"hex8":return u.rgbaToHex8(u.hslaToRgba(r));case"name":var o=u.toString(t,"hex6");return null!==(n=l[o])&&void 0!==n?n:o}},toHslString:function(t){var e=a(t,4),n=e[0],r=e[1],o=e[2];return e[3],"hsl("+Math.floor(360*n)+", "+Math.floor(100*r)+"%, "+Math.floor(100*o)+"%)"},toHslaString:function(t){var e=a(t,4),n=e[0],o=e[1],i=e[2],u=e[3];return"hsla("+Math.floor(360*n)+", "+Math.floor(100*o)+"%, "+Math.floor(100*i)+"%, "+r(u,2)+")"},toHsbString:function(t){var e=a(t,4),n=e[0],r=e[1],o=e[2];return e[3],"hsb("+Math.floor(360*n)+", "+Math.floor(100*r)+"%, "+Math.floor(100*o)+"%)"},toHsbaString:function(t){var e=a(t,4),n=e[0],o=e[1],i=e[2],u=e[3];return"hsba("+Math.floor(360*n)+", "+Math.floor(100*o)+"%, "+Math.floor(100*i)+"%, "+r(u,2)+")"},toRgbString:function(t){var e=a(t,4),n=e[0],r=e[1],o=e[2];return e[3],"rgb("+Math.floor(255*n)+", "+Math.floor(255*r)+", "+Math.floor(255*o)+")"},toRgbaString:function(t){var e=a(t,4),n=e[0],o=e[1],i=e[2],u=e[3];return"rgba("+Math.floor(255*n)+", "+Math.floor(255*o)+", "+Math.floor(255*i)+", "+r(u,2)+")"},stringToRgba:function(t){if("string"!=typeof t)return t;var e=document.createElement("div");e.style.background=t,document.body.appendChild(e),t=getComputedStyle(e).backgroundColor,e.remove();var n=t.split("(")[1].slice(0,-1).split(",").map(Number).map((function(t,e){return e<3?t/255:t}));return n.length<4&&n.push(1),n},rgbaToHex4:function(t){return("#"+t.map((function(t){return Math.round(15*t).toString(16)})).join("")).toUpperCase()},rgbaToHex8:function(t){return("#"+t.map((function(t){return Math.round(255*t).toString(16).padStart(2,"0")})).join("")).toUpperCase()},hslaToRgba:function(t){var e=a(t,4),n=e[0],r=e[1],o=e[2],i=e[3],u=r*Math.min(o,1-o),c=function(t){var e=(t+12*n)%12;return o-u*Math.max(Math.min(e-3,9-e,1),-1)};return[c(0),c(8),c(4),i]},hsbaToHsla:function(t){var e=a(t,4),n=e[0],r=e[1],o=e[2],i=(2-r)*o/2;return 0!==i&&(r=1===i?0:i<.5?r*o/(2*i):r*o/(2-2*i)),[n,r,i,e[3]]},hslaToHsba:function(t){var e=a(t,4),n=e[0],r=e[1],o=e[2],i=r*(o<.5?o:1-o);return[n,0===i?0:2*i/(o+i),o+i,e[3]]},rgbaToHsla:function(t){var e,n,r=a(t,4),o=r[0],i=r[1],u=r[2],c=r[3],l=Math.max(o,i,u),s=Math.min(o,i,u),f=(l+s)/2;if(l===s)e=n=0;else{var h=l-s;switch(n=f>.5?h/(2-l-s):h/(l+s),l){case o:e=(i-u)/h+(i<u?6:0);break;case i:e=(u-o)/h+2;break;case u:e=(o-i)/h+4}e/=6}return[e,n,f,c]},hexToRgba:function(t){return[parseInt(t.slice(1,2),16)/255,parseInt(t.slice(3,2),16)/255,parseInt(t.slice(5,2),16)/255,t.length>7?parseInt(t.slice(7,2),16)/255:1]},isValid:function(t){return"undefined"==typeof CSS||"function"!=typeof CSS.supports||CSS.supports("color",t)},getFormat:function(t){return t=t.toLowerCase(),!1===u.isValid(t)?"":t.startsWith("#")?"hex"+(t.length-1):t.includes("(")?t.split("(")[0]:"name"},circle:function(t){var e=u.stringToRgba(t),n=u.rgbaToHsla(e),r=u.hslaToHsba(n),o=u.hsbaToHsla(r),i=u.hslaToRgba(o),a=u.rgbaToHex8(i.slice(0,3));return l[a]},test:function(){return console.log(Object.values(l).length),Object.values(l).filter((function(t){return u.circle(t)===t}))}};"undefined"!=typeof window&&(window.Colors=u);const c=u;var l={"#F0F8FF":"aliceblue","#FAEBD7":"antiquewhite","#00FFFF":"aqua","#7FFFD4":"aquamarine","#F0FFFF":"azure","#F5F5DC":"beige","#FFE4C4":"bisque","#000000":"black","#FFEBCD":"blanchedalmond","#0000FF":"blue","#8A2BE2":"blueviolet","#A52A2A":"brown","#DEB887":"burlywood","#5F9EA0":"cadetblue","#7FFF00":"chartreuse","#D2691E":"chocolate","#FF7F50":"coral","#6495ED":"cornflowerblue","#FFF8DC":"cornsilk","#DC143C":"crimson","#00008B":"darkblue","#008B8B":"darkcyan","#B8860B":"darkgoldenrod","#A9A9A9":"darkgray","#006400":"darkgreen","#BDB76B":"darkkhaki","#8B008B":"darkmagenta","#556B2F":"darkolivegreen","#FF8C00":"darkorange","#9932CC":"darkorchid","#8B0000":"darkred","#E9967A":"darksalmon","#8FBC8F":"darkseagreen","#483D8B":"darkslateblue","#2F4F4F":"darkslategray","#00CED1":"darkturquoise","#9400D3":"darkviolet","#FF1493":"deeppink","#00BFFF":"deepskyblue","#696969":"dimgray","#1E90FF":"dodgerblue","#B22222":"firebrick","#FFFAF0":"floralwhite","#228B22":"forestgreen","#FF00FF":"fuchsia","#DCDCDC":"gainsboro","#F8F8FF":"ghostwhite","#FFD700":"gold","#DAA520":"goldenrod","#ADFF2F":"greenyellow","#808080":"gray","#008000":"green","#F0FFF0":"honeydew","#FF69B4":"hotpink","#CD5C5C":"indianred","#4B0082":"indigo","#FFFFF0":"ivory","#F0E68C":"khaki","#E6E6FA":"lavender","#FFF0F5":"lavenderblush","#7CFC00":"lawngreen","#FFFACD":"lemonchiffon","#ADD8E6":"lightblue","#F08080":"lightcoral","#E0FFFF":"lightcyan","#FAFAD2":"lightgoldenrodyellow","#D3D3D3":"lightgray","#90EE90":"lightgreen","#FFB6C1":"lightpink","#FFA07A":"lightsalmon","#20B2AA":"lightseagreen","#87CEFA":"lightskyblue","#778899":"lightslategray","#FFFFE0":"lightyellow","#00FF00":"lime","#32CD32":"limegreen","#FAF0E6":"linen","#800000":"maroon","#66CDAA":"mediumaquamarine","#0000CD":"mediumblue","#BA55D3":"mediumorchid","#9370DB":"mediumpurple","#3CB371":"mediumseagreen","#7B68EE":"mediumslateblue","#00FA9A":"mediumspringgreen","#48D1CC":"mediumturquoise","#C71585":"mediumvioletred","#191970":"midnightblue","#F5FFFA":"mintcream","#FFE4E1":"mistyrose","#FFE4B5":"moccasin","#FFDEAD":"navajowhite","#000080":"navy","#FDF5E6":"oldlace","#808000":"olive","#6B8E23":"olivedrab","#FFA500":"orange","#FF4500":"orangered","#DA70D6":"orchid","#EEE8AA":"palegoldenrod","#98FB98":"palegreen","#AFEEEE":"paleturquoise","#DB7093":"palevioletred","#FFEFD5":"papayawhip","#FFDAB9":"peachpuff","#CD853F":"peru","#FFC0CB":"pink","#DDA0DD":"plum","#B0E0E6":"powderblue","#800080":"purple","#663399":"rebeccapurple","#FF0000":"red","#BC8F8F":"rosybrown","#4169E1":"royalblue","#8B4513":"saddlebrown","#FA8072":"salmon","#F4A460":"sandybrown","#2E8B57":"seagreen","#FFF5EE":"seashell","#A0522D":"sienna","#C0C0C0":"silver","#87CEEB":"skyblue","#6A5ACD":"slateblue","#708090":"slategray","#FFFAFA":"snow","#00FF7F":"springgreen","#4682B4":"steelblue","#D2B48C":"tan","#008080":"teal","#D8BFD8":"thistle","#FF6347":"tomato","#40E0D0":"turquoise","#EE82EE":"violet","#F5DEB3":"wheat","#FFFFFF":"white","#F5F5F5":"whitesmoke","#FFFF00":"yellow","#9ACD32":"yellowgreen"},s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},y={};const p=function(){function t(){}return t.create=function(t,e,n){return{id:t,editing:!1,selected:n,hover:!1,fill:[{id:t+"2123",type:"Solid",color:[0,0,.8,1],format:"hex4",visible:!0}],stroke:[],effect:[],points:[],rotation:0,visible:!0,locked:!1,x:e.x,y:e.y}},t.path=function(t){return e=t.points,n=new Path2D,e.forEach((function(t,e,r){if(0===t.radius)return n.lineTo(t.x,t.y);var o=r[(e-1+r.length)%r.length],a=r[(e+1)%r.length],u=i(t,o),c=i(t,a),l=function(t,e){var n,r=t.x*e.y-t.y*e.x,o=t.x*e.x+t.y*e.y,i=Math.asin((n=r,Math.min(Math.max(n,-1),1)));return o<0?i<0?{angle:i+Math.PI,radius_sign:1,counter_clockwise:!1}:{angle:i-Math.PI,radius_sign:-1,counter_clockwise:!0}:i<0?{angle:i,radius_sign:1,counter_clockwise:!1}:{angle:i,radius_sign:-1,counter_clockwise:!0}}(u,c),s=l.angle,f=l.radius_sign,h=l.counter_clockwise,y=s/2,p=Math.abs(Math.cos(y)*t.radius/Math.sin(y)),d=t.radius,v=Math.min(u.length,c.length)/2;p>v&&(p=v,d=Math.abs(p*Math.sin(y)/Math.cos(y)));var x=t.x+c.x*p-c.y*d*f,g=t.y+c.y*p+c.x*d*f;n.arc(x,g,d,u.angle+Math.PI/2*f,c.angle-Math.PI/2*f,h)})),n.closePath(),n;var e,n},t.fill=function(t,e,n){t.fill.filter((function(t){return t.visible})).forEach((function(r){"Solid"===r.type?(e.fillStyle=c.toString(r.color),e.fill(n)):"Image"===r.type&&(e.save(),e.clip(n),y[r.id]?y[r.id].complete&&!y[r.id].broken&&(e.drawImage(y[r.id],r.x-t.width/2,r.y-t.height/2,t.width,t.height),e.restore()):(y[r.id]=new Image,y[r.id].src=r.src,y[r.id].onerror=function(){return y[r.id].broken=!0}))}))},t.stroke=function(t,e,n){return Math.max.apply(Math,h([],f(t.stroke.filter((function(t){return t.visible})).map((function(t){if(0!==t.width){if(e.save(),e.strokeStyle=c.toString(t.color),e.lineWidth=t.width,"Inside"===t.type)e.clip(n),e.lineWidth=2*t.width;else if("Outside"===t.type){var r=new Path2D(n);r.rect(Number.MAX_SAFE_INTEGER/2,-Number.MAX_SAFE_INTEGER/2,-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),e.clip(r),e.lineWidth=2*t.width}return e.stroke(n),e.restore(),t.width}}))),!1))},t.effect=function(t,e,n,r,o){t.effect.filter((function(t){return t.visible})).forEach((function(i){if(e.save(),"Drop shadow"===i.type&&r)e.filter="blur("+.2*i.blur*o.scale+"px)",e.fillStyle=c.toString(i.color),e.translate(i.x,i.y),e.scale(Math.exp(.005*i.spread),Math.exp(.005*i.spread)),e.rotate(t.rotation),e.fill(n);else if("Inner shadow"===i.type&&!r){e.filter="blur("+.2*i.blur*o.scale+"px)",e.fillStyle=c.toString(i.color),e.clip(n),e.translate(i.x,i.y),e.scale(Math.exp(.005*-i.spread),Math.exp(.005*-i.spread));var a=new Path2D(n);a.rect(Number.MAX_SAFE_INTEGER/2,-Number.MAX_SAFE_INTEGER/2,-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),e.fill(a),e.translate(-i.x,-i.y)}e.filter="none",e.restore()}))},t.draw=function(t,e,n,r){var o=this.path(t);this.effect(t,e,o,!0,r),this.fill(t,e,o),this.effect(t,e,o,!1,r);var i=t.fill.length&&e.isPointInPath(o,n.x,n.y);e.lineWidth=this.stroke(t,e,o);var a=t.stroke.length&&e.isPointInStroke(o,n.x,n.y);return i||a},t.resize=function(t,e,n){var r=this.center(t),i=this.bound(t);if(0!==i.width&&0!==i.height){var a,u,c=o((a=n,{x:(u=r).x-(a.x-u.x),y:u.y-(a.y-u.y)}),r,-t.rotation),l=o(e,r,-t.rotation);t.points.forEach((function(e){var n=o(e,r,-t.rotation);e.x=n.x,e.y=n.y,e.controls.forEach((function(e){var n=o(e,r,-t.rotation);e.x=n.x,e.y=n.y}))}));var s=Math.abs(l.x-c.x)/i.width,y=Math.abs(l.y-c.y)/i.height,p=Math.min.apply(Math,h([],f(t.points.map((function(t){return t.x}))),!1)),d=Math.min.apply(Math,h([],f(t.points.map((function(t){return t.y}))),!1)),v=Math.min(c.x,l.x),x=Math.min(c.y,l.y);t.points.forEach((function(t){t.x=(t.x-p)*s+v,t.y=(t.y-d)*y+x,t.controls.forEach((function(t){t.x=(t.x-p)*s+v,t.y=(t.y-d)*y+x}))})),t.points.forEach((function(e){var n=o(e,r,t.rotation);e.x=n.x,e.y=n.y,e.controls.forEach((function(e){var n=o(e,r,t.rotation);e.x=n.x,e.y=n.y}))}))}},t.stretch=function(t,e,n){},t.outline=function(t,e,n,r){e.strokeStyle=n,e.lineWidth=r;var o=this.path(t);e.stroke(o)},t.onScreen=function(t,e){var n=this.positiveBound(t);return!(n.x>e.x2||n.y>e.y2||n.x+n.width<e.x1||n.y+n.height<e.y1)},t.highlight=function(t,e,n,r,o,i){this.outline(t,e,r,o);var a=void 0;return this.drawBound(t,e,n,r,o)&&(a="stretch"),this.drawRotate(t,e,n,i)&&(a="rotate"),this.drawResize(t,e,n,r,o,i)&&(a="resize"),a?{action:a,element:t}:void 0},t.insideBound=function(t,e,n){var r=this.bound(t),o=this.center(t);return e.save(),e.translate(o.x,o.y),e.rotate(t.rotation),e.beginPath(),e.rect(-r.width/2,-r.height/2,r.width,r.height),e.restore(),e.isPointInPath(n.x,n.y)},t.drawBound=function(t,e,n,r,o){var i=this.bound(t),a=this.center(t);e.save(),e.translate(a.x,a.y),e.rotate(t.rotation),e.strokeStyle=r,e.beginPath(),e.rect(-i.width/2,-i.height/2,i.width,i.height),e.lineWidth=2*o;var u=e.isPointInStroke(n.x,n.y);return e.lineWidth=o,e.stroke(),e.restore(),u},t.drawResize=function(t,e,n,r,o,i){var a=this.bound(t),u=this.center(t);return e.save(),e.translate(u.x,u.y),e.rotate(t.rotation),a.x=-a.width/2,a.y=-a.height/2,e.fillStyle="white",e.strokeStyle=r,e.lineWidth=o,e.beginPath(),this.boxes(t.id,a,i).forEach((function(t){return e.rect(t.x,t.y,t.width,t.height)})),Math.abs(a.width)+Math.abs(a.height)>4*i&&(e.fill(),e.stroke()),e.restore(),e.isPointInPath(n.x,n.y)},t.drawRotate=function(t,e,n,r){var o=this.bound(t),i=this.center(t);return e.save(),e.translate(i.x,i.y),e.rotate(t.rotation),o.x=-o.width/2-Math.sign(o.width)*r,o.y=-o.height/2-Math.sign(o.height)*r,o.width+=Math.sign(o.width)*r*2,o.height+=Math.sign(o.height)*r*2,e.beginPath(),this.boxes(t.id,o,2*r).forEach((function(t){return e.rect(t.x,t.y,t.width,t.height)})),e.restore(),e.isPointInPath(n.x,n.y)},t.drawPoints=function(t,e,n,r,o,i){e.strokeStyle=r,e.lineWidth=o;var a=.7*i,u=t.points.map((function(t){e.fillStyle="white";var o=t.controls.map((function(o,i){var u=Math.atan2(o.y-t.y,o.x-t.x)-Math.PI/4;e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(o.x,o.y),e.stroke(),e.beginPath(),e.translate(o.x,o.y),e.rotate(u),e.rect(-a,-a,2*a,2*a),e.rotate(-u),e.translate(-o.x,-o.y);var c=e.isPointInPath(n.x,n.y);if(e.fillStyle=c?r:"white",e.fill(),e.stroke(),c)return i})).filter((function(t){return void 0!==t})).pop();e.beginPath(),e.moveTo(t.x+i,t.y),e.arc(t.x,t.y,i,0,2*Math.PI);var u=e.isPointInPath(n.x,n.y);if(e.fillStyle=u?r:"white",e.fill(),e.stroke(),u||void 0!==o)return s(s({},t),{control:o})})).filter((function(t){return t})).pop();return u?{element:t,action:"edit",point:u}:void 0},t.edit=function(t,e,n,r){var o=e.x-n.x,i=e.y-n.y;if(void 0!==r.control){t.points[r.i].controls[r.control].x+=o,t.points[r.i].controls[r.control].y+=i;var a=0===r.control?1:0;t.points[r.i].controls[a].x-=o,t.points[r.i].controls[a].y-=i}else t.points[r.i].x+=o,t.points[r.i].y+=i,t.points[r.i].controls.forEach((function(t){t.x+=o,t.y+=i}))},t.center=function(t){var e=t.points.map((function(e){return o(e,{x:0,y:0},-t.rotation)})),n=e.map((function(t){return t.x})),r=e.map((function(t){return t.y})),i=Math.min.apply(Math,h([],f(n),!1)),a=Math.max.apply(Math,h([],f(n),!1)),u=Math.min.apply(Math,h([],f(r),!1));return o({x:i+(a-i)/2,y:u+(Math.max.apply(Math,h([],f(r),!1))-u)/2},{x:0,y:0},t.rotation)},t.bound=function(t){var e=this.center(t),n=t.points.map((function(n){return o(n,e,-t.rotation)})),r=n.map((function(t){return t.x})),i=n.map((function(t){return t.y})),a=Math.min.apply(Math,h([],f(r),!1)),u=Math.max.apply(Math,h([],f(r),!1)),c=Math.min.apply(Math,h([],f(i),!1));return{x:a,y:c,width:u-a,height:Math.max.apply(Math,h([],f(i),!1))-c}},t.getFill=function(t){return t.fill},t.setFill=function(t,e){t.fill.forEach((function(t){e.id===t.id&&Object.entries(e).forEach((function(e){var n=f(e,2),r=n[0],o=n[1];t[r]=o}))}))},t.getStroke=function(t){return t.stroke},t.setStroke=function(t,e){t.stroke.forEach((function(t){e.id===t.id&&Object.entries(e).forEach((function(e){var n=f(e,2),r=n[0],o=n[1];t[r]=o}))}))},t.getEffect=function(t){return t.effect},t.setEffect=function(t,e){t.effect.forEach((function(t){e.id===t.id&&Object.entries(e).forEach((function(e){var n=f(e,2),r=n[0],o=n[1];t[r]=o}))}))},t.positiveBound=function(t){var e=this.bound(t);return{x:Math.min(e.x,e.x+e.width),y:Math.min(e.y,e.y+e.height),width:Math.abs(e.width),height:Math.abs(e.height)}},t.points=function(t){return t.points.concat(this.center(t))},t.move=function(t,e,n){var r=e.x-n.x,o=e.y-n.y;t.points.forEach((function(t){t.x+=r,t.y+=o,t.controls.forEach((function(t){t.x+=r,t.y+=o}))}))},t.rotate=function(t,e,n){var r=this.center(t),i=Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(r.y-n.y,r.x-n.x);t.rotation+=i,t.points.forEach((function(t){var e=o(t,r,i);t.x=e.x,t.y=e.y,t.controls.forEach((function(t){var e=o(t,r,i);t.x=e.x,t.y=e.y}))}))},t.boxes=function(t,e,n){return[{id:t,x:e.x-n,y:e.y-n,width:2*n,height:2*n},{id:t,x:e.x+e.width-n,y:e.y-n,width:2*n,height:2*n},{id:t,x:e.x-n,y:e.y+e.height-n,width:2*n,height:2*n},{id:t,x:e.x+e.width-n,y:e.y+e.height-n,width:2*n,height:2*n}]},t}();var d,v=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{label:"Circle",type:"circle",x:n.x,y:n.y,radius:0,start_angle:0,end_angle:6.283185307179586,counter_clockwise:!0})},e.points=function(t){return[{x:t.x,y:t.y}]},e.path=function(t){var e=new Path2D;return e.arc(t.x,t.y,Math.abs(t.radius),t.start_angle,t.end_angle,t.counter_clockwise),e},e.draw=function(t,e,n,r){e.beginPath();var o=this.path(t);return this.fill(t,e,o),this.stroke(t,e,o),e.isPointInPath(o,n.x,n.y)},e.outline=function(t,e,n,r){e.strokeStyle=n,e.lineWidth=r,e.beginPath(),e.arc(t.x,t.y,Math.abs(t.radius),t.start_angle,t.end_angle),e.stroke()},e.bound=function(t){return{x:t.x-t.radius,y:t.y-t.radius,width:2*t.radius,height:2*t.radius}},e.resize=function(t,e,n){var r=this.center(t),i={x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)},a={x:(i.x+e.x)/2,y:(i.y+e.y)/2},u=o(i,a,-t.rotation),c=o(e,a,-t.rotation);t.x=a.x,t.y=a.y,t.radius=Math.max(c.x-u.x,c.y-u.y)/2},e}(p);var g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};const m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{label:"Ellipse",type:"ellipse",x:n.x,y:n.y,rotation:0,points:this.makePoints(n.x,n.y,1,1)})},e.makePoints=function(t,e,n,r){var o=.5522848,i=e+r/2,a=t+n/2,u=n/2*o,c=r/2*o;return[{x:t+n,y:i,controls:[{x:t+n,y:i+c},{x:t+n,y:i-c}]},{x:a,y:e+r,controls:[{x:a-u,y:e+r},{x:a+u,y:e+r}]},{x:t,y:i,controls:[{x:t,y:i-c},{x:t,y:i+c}]},{x:a,y:e,controls:[{x:a+u,y:e},{x:a-u,y:e}]}].map((function(t,e){return b(b({},t),{i:e})}))},e.path=function(t){var e=new Path2D;return e.moveTo(t.points[0].x,t.points[0].y),t.points.forEach((function(n,r,o){var i=o[(r+1)%t.points.length];e.bezierCurveTo(n.controls[0].x,n.controls[0].y,i.controls[1].x,i.controls[1].y,i.x,i.y)})),e},e}(p);var w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{elements:[]})},e.draw=function(t,e,n,r){var o=this.center(t);e.translate(o.x,o.y),e.rotate(t.rotation),e.translate(-o.x,-o.y);var i=t.elements.filter((function(t){return t.visible})).reverse().filter((function(t){return H[t.type].draw(t,e,n,r)})).filter((function(t){return!t.locked}));return e.translate(o.x,o.y),e.rotate(-t.rotation),e.translate(-o.x,-o.y),i.length>0},e.bound=function(t){var e=t.elements.map((function(t){return H[t.type].bound(t)})),n=e.reduce((function(t,e){return Math.min(t,e.x)}),Number.MAX_SAFE_INTEGER),r=e.reduce((function(t,e){return Math.min(t,e.y)}),Number.MAX_SAFE_INTEGER);return{x:n,y:r,width:e.reduce((function(t,e){return Math.max(t,e.x+e.width)}),Number.MIN_SAFE_INTEGER)-n,height:e.reduce((function(t,e){return Math.max(t,e.y+e.height)}),Number.MIN_SAFE_INTEGER)-r}},e.outline=function(t,e,n,r){var o=this.bound(t),i=this.center(t);e.translate(i.x,i.y),e.rotate(t.rotation),e.strokeStyle=n,e.lineWidth=r,e.beginPath(),e.rect(-o.width/2,-o.height/2,o.width,o.height),e.stroke(),e.rotate(-t.rotation),e.translate(-i.x,-i.y)},e.getFill=function(t){return t.elements.map((function(t){return H[t.type].getFill(t)})).flat()},e.setFill=function(t,e){t.elements.map((function(t){return H[t.type].setFill(t,e)}))},e.getStroke=function(t){return t.elements.map((function(t){return H[t.type].getStroke(t)})).flat()},e.setStroke=function(t,e){t.elements.map((function(t){return H[t.type].setStroke(t,e)}))},e.getEffect=function(t){return t.elements.map((function(t){return H[t.type].getEffect(t)})).flat()},e.setEffect=function(t,e){t.elements.map((function(t){return H[t.type].setEffect(t,e)}))},e.move=function(t,e,n){t.elements.filter((function(t){return!t.selected})).forEach((function(t){H[t.type].move(t,e,n)}))},e.resize=function(t,e,n){t.elements.forEach((function(t){H[t.type].resize(t,e,n)}))},e}(p);var M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};const E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{label:"Rectangle",type:"rectangle",rotation:0,points:this.makePoints(n.x,n.y,1,1,0)})},e.makePoints=function(t,e,n,r,o){return[{x:t,y:e},{x:t+n,y:e},{x:t+n,y:e+r},{x:t,y:e+r}].map((function(t,e){return _(_({},t),{i:e,radius:o,controls:[]})}))},e.stretch=function(t,e,n){},e}(p);var S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{x:n.x,y:n.y,label:"Frame",type:"frame",rotation:0,width:0,height:0,fill:[{id:e+"2123",color:[1,1,1,1],format:"hex4",visible:!0}]})},e.points=function(t){return[{x:-t.width/2,y:-t.height/2,radius:t.radius},{x:t.width/2,y:-t.height/2,radius:t.radius},{x:t.width/2,y:t.height/2,radius:t.radius},{x:-t.width/2,y:t.height/2,radius:t.radius}]},e.path=function(t){var e=new Path2D;return this.points(t).forEach((function(t){return e.lineTo(t.x,t.y)})),e.closePath(),e},e.draw=function(t,e,n,r){var o=this.center(t);e.fillStyle=t.color,e.translate(o.x,o.y),e.rotate(t.rotation),e.beginPath();var i=this.path(t);this.fill(t,e,i),this.stroke(t,e,i);var a=e.isPointInPath(i,n.x,n.y);e.rotate(-t.rotation),e.translate(-o.x,-o.y);var u=t.elements.filter((function(t){return t.visible})).reverse().filter((function(t){return H[t.type].draw(t,e,n,r)})).filter((function(t){return!t.locked}));return u.length>0?u.length>0:a},e.outline=function(t,e,n,r){var o=this.center(t);e.strokeStyle=n,e.lineWidth=r,e.translate(o.x,o.y),e.rotate(t.rotation);var i=this.path(t);e.stroke(i),e.rotate(-t.rotation),e.translate(-o.x,-o.y)},e.move=function(t,e,n){t.x=t.x+e.x-n.x,t.y=t.y+e.y-n.y},e.bound=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},e.resize=function(t,e,n){var r=this.center(t),i={x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)},a={x:(i.x+e.x)/2,y:(i.y+e.y)/2},u=o(i,a,-t.rotation),c=o(e,a,-t.rotation);t.x=u.x,t.y=u.y,t.width=c.x-u.x,t.height=c.y-u.y},e.stretch=function(t,e,n){var r=this.center(t),i={x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)},a={x:(i.x+e.x)/2,y:(i.y+e.y)/2},u=o(i,a,-t.rotation),c=o(e,a,-t.rotation);t.y=u.y,t.height=c.y-u.y},e}(F);var P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{label:"Line",type:"line",fill:[],stroke:[{id:e+"564",type:"Center",width:2,color:[.2,.2,.2,1],format:"hex4",visible:!0}],points:[{x:n.x,y:n.y,i:0,controls:[]},{x:n.x,y:n.y,i:1,controls:[]}]})},e.path=function(t){var e=new Path2D;return t.points.forEach((function(t){return e.lineTo(t.x,t.y)})),e},e.draw=function(t,e,n,r){var o=this.path(t);return e.lineWidth=this.stroke(t,e,o),e.isPointInStroke(o,n.x,n.y)},e.highlight=function(t,e,n,r,o,i){this.outline(t,e,r,o);var a=void 0;return this.drawBound(t,e,n,r,o)&&(a="stretch"),this.drawRotate(t,e,n,i)&&(a="rotate"),this.drawResize(t,e,n,r,o,i)&&(a="resize"),a?{action:a,element:t}:void 0},e.drawBound=function(t,e,n,r,o){return!1},e.drawRotate=function(t,e,n,r){return!1},e.drawResize=function(t,e,n,r,o,i){e.fillStyle="white",e.strokeStyle=r,e.lineWidth=o,e.beginPath();var a=Math.atan2(t.points[0].y-t.points[1].y,t.points[0].x-t.points[1].x);return this.boxes(t,i).forEach((function(t){e.translate(t.x,t.y),e.rotate(a),e.rect(-t.width,-t.width,2*t.width,2*t.height),e.rotate(-a),e.translate(-t.x,-t.y)})),e.fill(),e.stroke(),e.isPointInPath(n.x,n.y)},e.center=function(t){return{x:t.points[0].x+(t.points[0].x+t.points[1].x)/2,y:t.points[0].y+(t.points[0].y+t.points[1].y)/2}},e.bound=function(t){var e=Math.min(t.points[0].x,t.points[1].x),n=Math.min(t.points[0].y,t.points[1].y);return{x:e,y:n,width:Math.max(t.points[0].x,t.points[1].x)-e,height:Math.max(t.points[0].y,t.points[1].y)-n}},e.resize=function(t,e,n){!function(t,e){return Math.pow(t.points[0].x-e.x,2)+Math.pow(t.points[0].y-e.y,2)<Math.pow(t.points[1].x-e.x,2)+Math.pow(t.points[1].y-e.y,2)}(t,n)?(t.points[1].x=Math.round(e.x),t.points[1].y=Math.round(e.y)):(t.points[0].x=Math.round(e.x),t.points[0].y=Math.round(e.y))},e.rotate=function(t,e,n){return 0},e.stretch=function(t,e,n){},e.points=function(t){return[{x:t.points[0].x,y:t.points[0].y},{x:t.points[1].x,y:t.points[1].y}]},e.boxes=function(t,e){return t.points.map((function(n){return{id:t.id,x:n.x,y:n.y,width:e,height:e}}))},e}(p);var A=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{label:"Arrow",type:"arrow"})},e.draw=function(t,e,n,r){var o=Math.atan2(t.y2-t.y1,t.x2-t.x1),i=new Path2D;return i.moveTo(t.x1,t.y1),i.lineTo(t.x2-t.head_length*Math.cos(o)*Math.cos(t.head_angle),t.y2-t.head_length*Math.sin(o)*Math.cos(t.head_angle)),e.stroke(i),i.moveTo(t.x2,t.y2),i.lineTo(t.x2-t.head_length*Math.cos(o-t.head_angle),t.y2-t.head_length*Math.sin(o-t.head_angle)),i.lineTo(t.x2-t.head_length*Math.cos(o+t.head_angle),t.y2-t.head_length*Math.sin(o+t.head_angle)),e.fill(i),e.isPointInPath(i,n.x,n.y)},e.outarrow=function(t,e,n,r){e.strokeStyle=n,e.arrowWidth=r;var o=Math.atan2(t.y2-t.y1,t.x2-t.x1);e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2-t.head_length*Math.cos(o)*Math.cos(t.head_angle),t.y2-t.head_length*Math.sin(o)*Math.cos(t.head_angle)),e.stroke(),e.moveTo(t.x2,t.y2),e.lineTo(t.x2-t.head_length*Math.cos(o-t.head_angle),t.y2-t.head_length*Math.sin(o-t.head_angle)),e.lineTo(t.x2-t.head_length*Math.cos(o+t.head_angle),t.y2-t.head_length*Math.sin(o+t.head_angle)),e.fill()},e.resize=function(t,e,n){},e.stretch=function(t,e,n){},e}(k);var D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},C=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};const B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{curves:[{x1:n.x-1,y1:n.y-1,x1cp:n.x,y1cp:n.y,x2:n.x+20,y2:n.y+20,x2cp:n.x,y2cp:n.y-10},{x1:n.x+20,y1:n.y+20,x1cp:n.x+10+20,y1cp:n.y+20,x2:n.x+40,y2:n.y+40,x2cp:n.x+20,y2cp:n.y-10+20},{x1:n.x+40,y1:n.y+20,x1cp:n.x+140+20,y1cp:n.y+20,x2:n.x+80,y2:n.y+40,x2cp:n.x+80,y2cp:n.y-10+20}],label:"Spline",type:"spline",fill:[],stroke:[{id:e+"564",type:"Center",width:1,color:[.2,.2,.2,1],format:"hex4",visible:!0}]})},e.points=function(t){return t.curves.map((function(t){return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}]})).flat()},e.path=function(t){var e=new Path2D,n={x2:void 0,y2:void 0};return t.curves.forEach((function(t){t.x2&&(n.x2===t.x1&&n.y2===t.y1||e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.x1cp,t.y1cp,t.x2cp,t.y2cp,t.x2,t.y2),n=t)})),e},e.outline=function(t,e,n,r){e.strokeStyle=n,e.lineWidth=r;var o=this.path(t);e.stroke(o)},e.drawBound=function(t,e,n,r,o){return e.strokeStyle=r,e.lineWidth=o,e.beginPath(),t.curves.forEach((function(t){e.moveTo(t.x1,t.y1),e.lineTo(t.x1cp,t.y1cp),e.moveTo(t.x2,t.y2),e.lineTo(t.x2cp,t.y2cp)})),e.stroke(),!1},e.drawRotate=function(t,e,n,r){return!1},e.drawResize=function(t,e,n,r,o,i){return e.fillStyle="white",e.strokeStyle=r,e.lineWidth=o,e.beginPath(),this.boxes(t,i).forEach((function(t){e.translate(t.x,t.y),e.rotate(0),e.rect(-t.width,-t.width,2*t.width,2*t.height),e.rotate(-0),e.translate(-t.x,-t.y)})),e.fill(),e.stroke(),e.isPointInPath(n.x,n.y)},e.bound=function(t){var e=t.curves.map((function(t){return t.x})),n=t.curves.map((function(t){return t.y})),r=Math.min.apply(Math,C([],T(e),!1)),o=Math.min.apply(Math,C([],T(n),!1));return{x:r,y:o,width:Math.max.apply(Math,C([],T(e),!1))-r,height:Math.max.apply(Math,C([],T(n),!1))-o}},e.move=function(t,e,n){var r=e.x-n.x,o=e.y-n.y;t.curves.forEach((function(t){t.x1+=r,t.y1+=o,t.x1cp+=r,t.y1cp+=o,t.y2+=o,t.x2+=r,t.x2cp+=r,t.y2cp+=o}))},e.resize=function(t,e,n){this.closestCurve(t,n).forEach((function(n){var r=t.curves[n.index],o=Math.round(e.x)-r["x"+n.point],i=Math.round(e.y)-r["y"+n.point];if(r["x"+n.point]=Math.round(e.x),r["y"+n.point]=Math.round(e.y),"1"===n.point)r.x1cp+=o,r.y1cp+=i;else if("2"===n.point)r.x2cp+=o,r.y2cp+=i;else if("1cp"===n.point){var a=n.index-1;if(-1===a&&(a=t.curves.length-1),t.curves[n.index].x1!==t.curves[a].x2||t.curves[n.index].y1!==t.curves[a].y2)return;var u=t.curves[a];u.x2cp=u.x2-(r.x1cp-u.x2),u.y2cp=u.y2-(r.y1cp-u.y2)}else if("2cp"===n.point){var c=n.index+1;if(c===t.curves.length&&(c=0),t.curves[n.index].x2!==t.curves[c].x1||t.curves[n.index].y2!==t.curves[c].y1)return;var l=t.curves[c];l.x1cp=l.x1-(r.x2cp-l.x1),l.y1cp=l.y1-(r.y2cp-l.y1)}}))},e.closestCurve=function(t,e){var n=this.boxes(t,0).reverse().map((function(t){return t.distance=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),t})),r=Math.min.apply(Math,C([],T(n.map((function(t){return t.distance}))),!1)),o=n.filter((function(t){return t.distance===r})),i=new Map(o.map((function(t){return[t.index,t]}))).values();return C([],T(i),!1)},e.rotate=function(t,e,n){return 0},e.stretch=function(t,e,n){},e.boxes=function(t,e){return t.curves.map((function(n,r){return[{point:"1",index:r,id:t.id,x:n.x1,y:n.y1,width:e,height:e},{point:"1cp",index:r,id:t.id,x:n.x1cp,y:n.y1cp,width:e,height:e},{point:"2",index:r,id:t.id,x:n.x2,y:n.y2,width:e,height:e},{point:"2cp",index:r,id:t.id,x:n.x2cp,y:n.y2cp,width:e,height:e}]})).flat()},e}(p);var I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function R(t,e){if(""===t.text)return["Text..."];var n=t.text.endsWith("\n")?" ":"";return(t.text+n).split("\n").map((function(n){return N(n.split(" ").map((function(t,n,r){return{value:t,width:e.measureText(t+(n!==r.length-1?" ":"")).width}})),Math.abs(t.width)," ")})).flat().map((function(n){return e.measureText(n).width>Math.abs(t.width)?N(n.split("").map((function(t){return{value:t,width:e.measureText(t).width}})),Math.abs(t.width),""):n})).flat()}function N(t,e,n){var r=0;return t.reduce((function(t,o){return r+o.width>e&&t[0].length&&(t.push(""),r=0),t[t.length-1]+=o.value+n,r+=o.width,t}),[""])}function z(t,e,n){return n.map((function(r,o){var i,a;return"left"===t.justify?i=-Math.abs(t.width)/2:"center"===t.justify?i=-e.measureText(r).width/2+1.4:"right"===t.justify&&(i=Math.abs(t.width)/2-e.measureText(r).width+3),"start"===t.align?a=-Math.abs(t.height)/2+(o+1)*Math.abs(t.size)*t.line_height-2:"center"===t.align?a=(o+1-n.length/2)*Math.abs(t.size)*t.line_height-2:"end"===t.align&&(a=Math.abs(t.height)/2-t.size/2+(o+1-n.length)*Math.abs(t.size)*t.line_height+3),{x:i,y:a}}))}const H={circle:x,ellipse:m,group:F,rectangle:E,frame:O,line:k,arrow:j,spline:B,text:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I(e,t),e.create=function(e,n,r){return Object.assign(t.create.call(this,e,n,r),{x:n.x,y:n.y,editing:!1,label:"Text",type:"text",text:"",style:"normal",weight:"normal",family:"Arial",justify:"left",align:"start",size:10,rotation:0,width:0,height:0,line_height:1,fill:[{id:e+"123321",type:"Text",color:[0,0,0,1],format:"hex4",visible:!0}]})},e.setFont=function(t,e){e.font=t.style+" normal "+t.weight+" "+Math.abs(t.size)+"px "+t.family.toLowerCase()},e.fill=function(t,e,n){this.setFont(t,e);var r=R(t,e),o=z(t,e,r);t.fill.filter((function(t){return t.visible})).forEach((function(n){e.fillStyle=""===t.text?"grey":c.toString(n.color),r.forEach((function(t,n){return e.fillText(t,o[n].x,o[n].y)}))}))},e.stroke=function(t,e,n){this.setFont(t,e);var r=R(t,e),o=z(t,e,r);return Math.max.apply(Math,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t.stroke.filter((function(t){return t.visible})).map((function(t){return 0===t.width?0:(console.log(t.color),e.lineWidth=t.width,e.strokeStyle=c.toString(t.color),r.forEach((function(t,n){return e.strokeText(t,o[n].x,o[n].y)})),t.width)}))),!1))},e.effect=function(t,e,n,r,o){var i=R(t,e),a=z(t,e,i);this.setFont(t,e),t.effect.filter((function(t){return t.visible})).forEach((function(t){e.save(),e.filter="blur("+Math.round(.1*t.blur*o.scale)+"px)",e.fillStyle=c.toString(t.color),e.translate(t.x,t.y),e.scale(Math.exp(.005*t.spread),Math.exp(.005*t.spread)),i.forEach((function(t,n){return e.fillText(t,a[n].x,a[n].y)})),e.filter="none",e.restore()}))},e.points=function(t){var e=this.center(t);return this.makePoints(t).map((function(e){return{x:e.x+t.x+t.width/2,y:e.y+t.y+t.height/2}})).map((function(n){return o(n,e,t.rotation)})).concat(e)},e.makePoints=function(t){return[{x:-t.width/2,y:-t.height/2},{x:t.width/2,y:-t.height/2},{x:t.width/2,y:t.height/2},{x:-t.width/2,y:t.height/2}]},e.path=function(t){var e=this.makePoints(t),n=new Path2D;return e.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath(),n},e.draw=function(t,e,n,r){if(t.editing)return!1;var o=this.center(t),i=this.path(t);e.fillStyle=t.color,e.save(),e.translate(o.x,o.y),e.rotate(t.rotation),this.effect(t,e,i,!0,r),this.stroke(t,e,i),this.fill(t,e,i);var a=e.isPointInPath(i,n.x,n.y);return e.restore(),a},e.center=function(t){var e=this.bound(t);return{x:e.x+e.width/2,y:e.y+e.height/2}},e.bound=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},e.outline=function(t,e,n,r){var o=this.center(t);e.strokeStyle=n,e.lineWidth=r,e.save(),e.translate(o.x,o.y),e.rotate(t.rotation);var i=this.path(t);e.stroke(i),e.restore()},e.move=function(t,e,n){t.x+=e.x-n.x,t.y+=e.y-n.y},e.resize=function(t,e,n){var r=this.center(t),i={x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)},a={x:(i.x+e.x)/2,y:(i.y+e.y)/2},u=o(i,a,-t.rotation),c=o(e,a,-t.rotation);t.x=Math.min(c.x,u.x),t.y=Math.min(c.y,u.y),t.width=Math.abs(c.x-u.x),t.height=Math.abs(c.y-u.y)},e.rotate=function(t,e,n){var r=this.center(t),o=Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(r.y-n.y,r.x-n.x);t.rotation+=o},e.stretch=function(t,e,n){var r=this.center(t),i={x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)},a={x:(i.x+e.x)/2,y:(i.y+e.y)/2},u=o(i,a,-t.rotation),c=o(e,a,-t.rotation);t.y=u.y,t.height=c.y-u.y},e}(p)};function W(t){return t.reduce((function(t,e){return t.concat("group"===e.type||"frame"===e.type?W(e.elements):[],[e])}),[])}function G(t,e){t.forEach((function(t,n,r){e(t,n,r),"group"!==t.type&&"frame"!==t.type||G(t.elements,e)}))}function X(t,e){return W(t).filter((function(t){return e.includes(t.id)}))}function U(t,e){return t===e}function L(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}!function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r]}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,n=null,r=null;return function(){return L(e,n,arguments)||(r=t.apply(null,arguments)),n=arguments,r}})),"function"==typeof Symbol&&Symbol.observable;var q=function(){return Math.random().toString(36).substring(7).split("").join(".")};function V(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}function K(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function J(t){return!!t&&!!t[It]}function $(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Rt}(t)||Array.isArray(t)||!!t[Bt]||!!t.constructor[Bt]||nt(t)||rt(t))}function Z(t,e,n){void 0===n&&(n=!1),0===Y(t)?(n?Object.keys:Nt)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function Y(t){var e=t[It];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:nt(t)?2:rt(t)?3:0}function Q(t,e){return 2===Y(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function tt(t,e,n){var r=Y(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function et(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function nt(t){return jt&&t instanceof Map}function rt(t){return Dt&&t instanceof Set}function ot(t){return t.o||t.t}function it(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=zt(t);delete e[It];for(var n=Nt(e),r=0;r<n.length;r++){var o=n[r],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function at(t,e){return void 0===e&&(e=!1),ct(t)||J(t)||!$(t)||(Y(t)>1&&(t.set=t.add=t.clear=t.delete=ut),Object.freeze(t),e&&Z(t,(function(t,e){return at(e,!0)}),!0)),t}function ut(){K(2)}function ct(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function lt(t){var e=Ht[t];return e||K(18,t),e}function st(){return kt}function ft(t,e){e&&(lt("Patches"),t.u=[],t.s=[],t.v=e)}function ht(t){yt(t),t.p.forEach(dt),t.p=null}function yt(t){t===kt&&(kt=t.l)}function pt(t){return kt={p:[],l:kt,h:t,m:!0,_:0}}function dt(t){var e=t[It];0===e.i||1===e.i?e.j():e.O=!0}function vt(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||lt("ES5").S(e,t,r),r?(n[It].P&&(ht(e),K(4)),$(t)&&(t=xt(e,t),e.l||bt(e,t)),e.u&&lt("Patches").M(n[It].t,t,e.u,e.s)):t=xt(e,n,[]),ht(e),e.u&&e.v(e.u,e.s),t!==Ct?t:void 0}function xt(t,e,n){if(ct(e))return e;var r=e[It];if(!r)return Z(e,(function(o,i){return gt(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return bt(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=it(r.k):r.o;Z(3===r.i?new Set(o):o,(function(e,i){return gt(t,r,o,e,i,n)})),bt(t,o,!1),n&&t.u&&lt("Patches").R(r,n,t.u,t.s)}return r.o}function gt(t,e,n,r,o,i){if(J(o)){var a=xt(t,o,i&&e&&3!==e.i&&!Q(e.D,r)?i.concat(r):void 0);if(tt(n,r,a),!J(a))return;t.m=!1}if($(o)&&!ct(o)){if(!t.h.F&&t._<1)return;xt(t,o),e&&e.A.l||bt(t,o)}}function bt(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&at(e,n)}function mt(t,e){var n=t[It];return(n?ot(n):t)[e]}function wt(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Ft(t){t.P||(t.P=!0,t.l&&Ft(t.l))}function Mt(t){t.o||(t.o=it(t.t))}function _t(t,e,n){var r=nt(e)?lt("MapSet").N(e,n):rt(e)?lt("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:st(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},o=r,i=Wt;n&&(o=[r],i=Gt);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return r.k=c,r.j=u,c}(e,n):lt("ES5").J(e,n);return(n?n.A:st()).p.push(r),r}function Et(t){return J(t)||K(22,t),function t(e){if(!$(e))return e;var n,r=e[It],o=Y(e);if(r){if(!r.P&&(r.i<4||!lt("ES5").K(r)))return r.t;r.I=!0,n=St(e,o),r.I=!1}else n=St(e,o);return Z(n,(function(e,o){r&&function(t,e){return 2===Y(t)?t.get(e):t[e]}(r.t,e)===o||tt(n,e,t(o))})),3===o?new Set(n):n}(t)}function St(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return it(t)}function Ot(){function t(t,e){var n=o[t];return n?n.enumerable=e:o[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[It];return Wt.get(e,t)},set:function(e){var n=this[It];Wt.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var o=t[e][It];if(!o.P)switch(o.i){case 5:r(o)&&Ft(o);break;case 4:n(o)&&Ft(o)}}}function n(t){for(var e=t.t,n=t.k,r=Nt(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==It){var a=e[i];if(void 0===a&&!Q(e,i))return!0;var u=n[i],c=u&&u[It];if(c?c.t!==a:!et(u,a))return!0}}var l=!!e[It];return r.length!==Nt(e).length+(l?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var o={};!function(t,e){Ht[t]||(Ht[t]=e)}("ES5",{J:function(e,n){var r=Array.isArray(e),o=function(e,n){if(e){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,t(o,!0));return r}var i=zt(n);delete i[It];for(var a=Nt(i),u=0;u<a.length;u++){var c=a[u];i[c]=t(c,e||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,e),i={i:r?5:4,A:n?n.A:st(),P:!1,I:!1,D:{},l:n,t:e,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,It,{value:i,writable:!0}),o},S:function(t,n,o){o?J(n)&&n[It].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[It];if(n){var o=n.t,i=n.k,a=n.D,u=n.i;if(4===u)Z(i,(function(e){e!==It&&(void 0!==o[e]||Q(o,e)?a[e]||t(i[e]):(a[e]=!0,Ft(n)))})),Z(o,(function(t){void 0!==i[t]||Q(i,t)||(a[t]=!1,Ft(n))}));else if(5===u){if(r(n)&&(Ft(n),a.length=!0),i.length<o.length)for(var c=i.length;c<o.length;c++)a[c]=!1;else for(var l=o.length;l<i.length;l++)a[l]=!0;for(var s=Math.min(i.length,o.length),f=0;f<s;f++)i.hasOwnProperty(f)||(a[f]=!0),void 0===a[f]&&t(i[f])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}q(),q(),V().withExtraArgument=V;var Pt,kt,At="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),jt="undefined"!=typeof Map,Dt="undefined"!=typeof Set,Tt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ct=At?Symbol.for("immer-nothing"):((Pt={})["immer-nothing"]=!0,Pt),Bt=At?Symbol.for("immer-draftable"):"__$immer_draftable",It=At?Symbol.for("immer-state"):"__$immer_state",Rt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Nt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,zt=Object.getOwnPropertyDescriptors||function(t){var e={};return Nt(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Ht={},Wt={get:function(t,e){if(e===It)return t;var n=ot(t);if(!Q(n,e))return function(t,e,n){var r,o=wt(e,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!$(r)?r:r===mt(t.t,e)?(Mt(t),t.o[e]=_t(t.A.h,r,t)):r},has:function(t,e){return e in ot(t)},ownKeys:function(t){return Reflect.ownKeys(ot(t))},set:function(t,e,n){var r=wt(ot(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var o=mt(ot(t),e),i=null==o?void 0:o[It];if(i&&i.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(et(n,o)&&(void 0!==n||Q(t.t,e)))return!0;Mt(t),Ft(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==mt(t.t,e)||e in t.t?(t.D[e]=!1,Mt(t),Ft(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ot(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){K(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){K(12)}},Gt={};Z(Wt,(function(t,e){Gt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Gt.deleteProperty=function(t,e){return Gt.set.call(this,t,e,void 0)},Gt.set=function(t,e,n){return Wt.set.call(this,t[0],e,n,t[0])};var Xt=new(function(){function t(t){var e=this;this.g=Tt,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var o=n;n=t;var i=e;return function(t){var e=this;void 0===t&&(t=o);for(var r=arguments.length,a=Array(r>1?r-1:0),u=1;u<r;u++)a[u-1]=arguments[u];return i.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(a))}))}}var a;if("function"!=typeof n&&K(6),void 0!==r&&"function"!=typeof r&&K(7),$(t)){var u=pt(e),c=_t(e,t,void 0),l=!0;try{a=n(c),l=!1}finally{l?ht(u):yt(u)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return ft(u,r),vt(t,u)}),(function(t){throw ht(u),t})):(ft(u,r),vt(a,u))}if(!t||"object"!=typeof t){if(void 0===(a=n(t))&&(a=t),a===Ct&&(a=void 0),e.F&&at(a,!0),r){var s=[],f=[];lt("Patches").M(t,a,s,f),r(s,f)}return a}K(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(o))}))};var r,o,i=e.produce(t,n,(function(t,e){r=t,o=e}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return[t,r,o]})):[i,r,o]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){$(t)||K(8),J(t)&&(t=Et(t));var e=pt(this),n=_t(this,t,void 0);return n[It].C=!0,yt(e),n},e.finishDraft=function(t,e){var n=(t&&t[It]).A;return ft(n,e),vt(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Tt&&K(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var o=lt("Patches").$;return J(t)?o(t,e):this.produce(t,(function(t){return o(t,e)}))},t}()),Ut=Xt.produce;Xt.produceWithPatches.bind(Xt),Xt.setAutoFreeze.bind(Xt),Xt.setUseProxies.bind(Xt),Xt.applyPatches.bind(Xt),Xt.createDraft.bind(Xt),Xt.finishDraft.bind(Xt);const Lt=Ut;var qt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},Kt=Object.defineProperty,Jt=Object.prototype.hasOwnProperty,$t=Object.getOwnPropertySymbols,Zt=Object.prototype.propertyIsEnumerable,Yt=function(t,e,n){return e in t?Kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Qt=function(t,e){for(var n in e||(e={}))Jt.call(e,n)&&Yt(t,n,e[n]);if($t)for(var r=0,o=$t(e);r<o.length;r++)n=o[r],Zt.call(e,n)&&Yt(t,n,e[n]);return t};function te(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var o=e.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return Qt(Qt({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function ee(t){var e,n={},r=[],o={addCase:function(t,e){var r="string"==typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,o},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[n,r,e]}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}qt(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Vt([void 0],t[0].concat(this)))):new(e.bind.apply(e,Vt([void 0],t.concat(this))))}}(Array);var ne=function(t){var e=t.name,n=t.initialState;if(!e)throw new Error("`name` is a required option for createSlice");var r=t.reducers||{},o="function"==typeof t.extraReducers?ee(t.extraReducers):[t.extraReducers],i=o[0],a=void 0===i?{}:i,u=o[1],c=void 0===u?[]:u,l=o[2],s=void 0===l?void 0:l,f=Object.keys(r),h={},y={},p={};f.forEach((function(t){var n,o,i=r[t],a=function(t,e){return t+"/"+e}(e,t);"reducer"in i?(n=i.reducer,o=i.prepare):n=i,h[t]=n,y[a]=n,p[t]=o?te(a,o):te(a)}));var d=function(t,e,n,r){void 0===n&&(n=[]),Ot();var o="function"==typeof e?ee(e):[e,n,r],i=o[0],a=o[1],u=o[2],c=Lt(t,(function(){}));return function(t,e){void 0===t&&(t=c);var n=Vt([i[e.type]],a.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[u]),n.reduce((function(t,n){if(n){var r;if(J(t))return void 0===(r=n(t,e))?t:r;if($(t))return Lt(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}}(n,Qt(Qt({},a),y),c,s);return{name:e,reducer:d,actions:p,caseReducers:h}}({name:"action",initialState:{cursors:[],views:[],elements:[],page:{color:[1,0,.9,1],format:"hex4",visible:!0}},reducers:we});ne.actions;var re=["Dead","Hairless","Sadistic","Metal","Wild","Domesticated","Abnormal","Medicated","Cocky","Massive","Disrespectful","Impressive","Out of control","Internet worthy","Hilarious","Sexy","Hot","Very tactful","Bearded","Duck-like","Violent","Slimy","Creepy","Embarrassed","Self-centered","Talking","Naked","Angry","Shaky","Deep","Sick","Dead","Zippy","Harsh","Sticky","Fluffy","Frozen","Rotten","Unholy","Filthy","Bonkers","Frisky","Greedy","Crawly","Cursed","Insane","Broken","Hideous","Ungodly","Abusive","Drunken","Hateful","Demonic","Idiotic","Twisted","Useless","Yapping","Magical","Indecent","Godawful","Arrogant","Demented","Fighting","Confused","Flirting","High-end","Insecure","Maniacal","Sickened","Slippery","Stubborn","Tripping","Vengeful","Sinister","Costumed","Cowardly","Haunting","Startled","Alcoholic","Mummified","Demanding","Shivering","Offensive","Nighttime","Depressed","Tasteless","Startling","Disgusting","Slap happy","Disturbing","Adulterous","Blathering","Flickering","Rebellious","Impertinent","Bull headed","Hyperactive","Pretentious","Infuriating","Outnumbered","Pea-brained","Territorial","Underhanded","Zombie like","Mischievous","At-the-ready","Free-loading","House-broken","Up-to-no-good","Cruel-hearted","Misunderstood","Narrow-minded","Self-absorbed","Bat-shit-crazy","Fiercely-loyal","Out-of-control","Fear-inspiring","Bat shit crazy","Painfully honest","Mentally impaired"];const oe=re[Math.floor(Math.random()*re.length)];var ie=["Dog","Puppy","Turtle","Rabbit","Parrot","Cat","Kitten","Goldfish","Mouse","Tropical Fish","Hamster","Cow","Duck","Shrimp","Pig","Goat","Crab","Deer","Bee","Sheep","Fish","Turkey","Dove","Chicken","Horse","Crow","Peacock","Sparrow","Goose","Stork","Pigeon","Hawk","Bald Eagle","Raven","Flamingo","Seagull","Ostrich","Swallow","Black Bird","Penguin","Robin","Swan","Owl","Woodpecker","Squirrel","Chimpanzee","Ox","Lion","Panda","Walrus","Otter","Kangaroo","Monkey","Koala","Mole","Elephant","Leopard","Hippopotamus","Giraffe","Fox","Coyote","Hedgehong","Camel","Starfish","Alligator","Tiger","Bear","Blue Whale","Raccoon","Arctic Wolf","Crocodile","Dolphin","Snake","Elk","Gorilla","Bat","Hare","Toad","Frog","Rat","Badger","Lizard","Hedgehog","Reindeer","Seal","Octopus","Shark","Seahorse","Whale","Jellyfish","Squid","Lobster","Pelican","Clam","Sea Urchin","Cormorant","Sea Anemone","Sea Turtle","Sea Lion","Coral","Moth","Butterfly","Spider","Ladybird","Ant","Dragonfly","Fly","Mosquito","Grasshopper","Beetle","Cockroach","Centipede","Worm","Louse"];const ae=ie[Math.floor(Math.random()*ie.length)];var ue,ce=(void 0===ue&&(ue=10),Array(ue).fill(null).map((function(t){return Math.random().toString(36).slice(2,3)})).join("").toUpperCase());console.log(oe+" "+ae,ce);const le=ce;Math.round(360*Math.random()),Math.round(25+70*Math.random()),Math.round(75+10*Math.random());var se={resize:function(t,e){var n=e.payload,r=n.position,o=n.last_position,i=n.selected_ids;X(t.elements,i).forEach((function(t){return H[t.type].resize(t,r,o)}))},rotate:function(t,e){var n=e.payload,r=n.position,o=n.last_position,i=n.selected_ids;X(t.elements,i).forEach((function(t){return H[t.type].rotate(t,r,o)}))},stretch:function(t,e){var n=e.payload,r=n.position,o=n.last_position,i=n.selected_ids;X(t.elements,i).forEach((function(t){return H[t.type].stretch(t,r,o)}))},move:function(t,e){var n=e.payload,r=n.position,o=n.last_position,i=n.selected_ids;X(t.elements,i).forEach((function(t){return H[t.type].move(t,r,o)}))},edit:function(t,e){var n=e.payload,r=n.position,o=n.last_position,i=n.selected_ids,a=n.point;X(t.elements,i).forEach((function(t){return H[t.type].edit(t,r,o,a)}))},createElements:function(t,e){ne.caseReducers.unselectAll(t),t.elements=e.payload.elements.concat(t.elements)},createElement:function(t,e){var n=e.payload,r=n.user_id,o=n.id,i=n.type,a=n.position;ne.caseReducers.unselectAll(t);var u=le===r;t.elements.unshift(H[i].create(o,a,u));var c,l=(c=e,JSON.parse(JSON.stringify(c)));l.payload={user_id:r,mode:"edit"},ne.caseReducers.cursor(t,l)},toggleVisible:function(t,e){var n=e.payload.id,r=W(t.elements).find((function(t){return t.id===n}));r&&(r.visible=!r.visible,r.selected=r.visible)},toggleLocked:function(t,e){var n=e.payload.id,r=W(t.elements).find((function(t){return t.id===n}));r&&(r.locked=!r.locked,r.selected=!r.locked)},group:function(t,e){var n=e.payload,r=n.id,o=n.selected_ids;console.log(r,o);var i=o[0];G(t.elements,(function(e,n,a){e.id===i&&(a[n]={id:r,label:"Group",type:"group",selected:!1,hover:!1,rotation:0,visible:!0,locked:!1,elements:X(t.elements,o)})})),he(t.elements,(function(t,e,n){o.includes(t.id)&&n.splice(e,1)}),r)}};const fe=se;function he(t,e,n){t.forEach((function(t,r,o){e(t,r,o),"group"===t.type&&t.id!==n&&he(t.elements,e,n)}))}Object.keys(se);const ye={addFill:function(t,e){var n=e.payload.selected_ids;X(t.elements,n).forEach((function(t){t.fill.push(e.payload.props)}))},setFill:function(t,e){var n=e.payload.selected_ids;X(t.elements,n).forEach((function(t){H[t.type].setFill(t,e.payload.props)}))},removeFill:function(t,e){var n=e.payload.id;W(t.elements).filter((function(t){return"group"!==t.type})).forEach((function(t){t.fill=t.fill.filter((function(t){return t.id!==n}))}))},addStroke:function(t,e){var n=e.payload.selected_ids;X(t.elements,n).forEach((function(t){t.stroke.push(e.payload.props)}))},setStroke:function(t,e){var n=e.payload.selected_ids;X(t.elements,n).forEach((function(t){H[t.type].setStroke(t,e.payload.props)}))},removeStroke:function(t,e){var n=e.payload.id;W(t.elements).filter((function(t){return"group"!==t.type})).forEach((function(t){t.stroke=t.stroke.filter((function(t){return t.id!==n}))}))},addEffect:function(t,e){var n=e.payload.selected_ids;X(t.elements,n).forEach((function(t){t.effect.push(e.payload.props)}))},setEffect:function(t,e){var n=e.payload.selected_ids;X(t.elements,n).forEach((function(t){H[t.type].setEffect(t,e.payload.props)}))},removeEffect:function(t,e){var n=e.payload.id;W(t.elements).filter((function(t){return"group"!==t.type})).forEach((function(t){t.effect=t.effect.filter((function(t){return t.id!==n}))}))},property:function(t,e){var n=e.payload.selected_ids,r=Object.entries(e.payload.props);X(t.elements,n).forEach((function(t){r.forEach((function(e){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e,2),r=n[0],o=n[1];if("x"===r||"y"===r){var i=H[t.type].bound(t),a=Number(o)-i[r];t.points.forEach((function(t){t[r]+=a}))}else"radius"===r?t.points.forEach((function(t){return t[r]=o})):t[r]=o}))}))},delete:function(t,e){var n=e.payload.selected_ids;G(t.elements,(function(t,e,r){n.includes(t.id)&&r.splice(e,1)}))},setBackground:function(t,e){t.page=e.payload}};var pe=function(){return(pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},de=pe(pe({},fe),ye);const ve=de;Object.keys(de);var xe={hoverOnly:function(t,e){W(t.elements).forEach((function(t){return t.hover=t.id===e.payload.id}))},select:function(t,e){var n=W(t.elements).find((function(t){return t.id===e.payload.id}));n&&(n.selected=!0)},selectOnly:function(t,e){W(t.elements).forEach((function(t){return t.selected=e.payload.select.includes(t.id)}))},unselect:function(t,e){var n=W(t.elements).find((function(t){return t.id===e.payload.id}));n&&(n.selected=!1,n.editing=!1)},selectAll:function(t){W(t.elements).forEach((function(t){return t.selected=!0}))},unselectAll:function(t){W(t.elements).forEach((function(t){t.selected=!1,t.editing=!1}))},editOnly:function(t,e){var n=W(t.elements).find((function(t){return t.id===e.payload.id}));n&&(n.editing=!0)}};const ge=xe;Object.keys(xe);const be={addUser:function(t,e){var n=e.payload,r=n.user_id,o=n.label,i=n.color;t.views.push({id:r,label:o,x:1e3,y:1e3,scale:5}),t.cursors.push({id:r,label:o,color:i,x:0,y:0,rotation:0,type:"select",mode:"edit",visible:!1,pressed:!1})},centerView:function(t,e){var n=e.payload,r=n.user_id,o=n.x,i=n.y,a=t.views.find((function(t){return r===t.id}));a&&(a.x=o,a.y=i,a.centered=!0)},removeUser:function(t,e){var n=e.payload.user_id;t.views=t.views.filter((function(t){return t.id!==n})),t.cursors=t.cursors.filter((function(t){return t.id!==n}))},view:function(t,e){var n=e.payload,r=n.user_id,o=n.delta_x,i=n.delta_y,a=n.delta_scale,u=n.cursor_x,c=n.cursor_y,l=t.views.find((function(t){return r===t.id}));if(l){o&&(l.x+=o),i&&(l.y+=i),a&&(l.scale+=a);var s=t.cursors.find((function(t){return r===t.id}));u&&(s.x=u),c&&(s.y=c)}},cursor:function(t,e){var n=e.payload.user_id,r=t.cursors.find((function(t){return n===t.id}));r&&(r.id=n,Object.entries(e.payload).forEach((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),n=e[0],o=e[1];void 0!==o&&(r[n]=o)})))}};var me=function(){return(me=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};const we=me(me(me(me({},n),ve),ge),be);return e})()}));